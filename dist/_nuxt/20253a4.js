(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{436:function(t,n,e){var content=e(466);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,e(11).default)("28311a0e",content,!0,{sourceMap:!1})},437:function(t,n,e){var content=e(468);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,e(11).default)("62a14803",content,!0,{sourceMap:!1})},441:function(t,n,e){"use strict";e.r(n);var r={data:function(){return{show:!1,wantName:""}},props:["category_id"],methods:{showInput:function(){this.show=!0},closeInput:function(){this.show=!1,this.wantName=""},addWant:function(){""!==this.wantName&&(this.$emit("wantAdded",this.wantName,this.category_id),this.show=!1,this.wantName="")}}},o=(e(465),e(74)),c=e(111),d=e.n(c),l=e(261),m=e(457),component=Object(o.a)(r,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",[t.show?e("div",[e("div",[e("v-textarea",{attrs:{label:"your goal","auto-grow":"",outlined:"",rows:"1","row-height":"15"},model:{value:t.wantName,callback:function(n){t.wantName=n},expression:"wantName"}})],1),t._v(" "),e("div",[e("v-btn",{on:{click:t.addWant}},[t._v("追加")]),t._v(" "),e("v-btn",{on:{click:t.closeInput}},[t._v("削除")])],1)]):e("v-btn",{staticClass:"white--text",attrs:{depressed:"",color:"#2de9ed"},on:{click:t.showInput}},[t._v("\n    +新規目標\n  ")])],1)}),[],!1,null,null,null);n.default=component.exports;d()(component,{VBtn:l.a,VTextarea:m.a})},465:function(t,n,e){"use strict";e(436)},466:function(t,n,e){(n=e(10)(!1)).push([t.i,".add-btn{color:#36dbde}",""]),t.exports=n},467:function(t,n,e){"use strict";e(437)},468:function(t,n,e){(n=e(10)(!1)).push([t.i,".main-container{margin:100px auto 0;width:85%;min-height:550px;position:relative}.main-container .modal_base{display:flex;justify-content:center;padding:0}.main-container .modal_base .modal_overlay{position:fixed;top:0;left:0;right:0;bottom:0;opacity:.5}.main-container .modal_base .modal_content{margin-top:-10px}.main-container .sab-conteiner{text-align:center;margin:10px}.main-container .sab-conteiner .done_btn{margin-bottom:20px}.main-container .sab-conteiner .categories-container{margin:0 auto}.main-container .sab-conteiner .categories-container .categories{text-align:left;float:left;margin:2%;background-color:#d6f2f0;min-width:200px;min-height:150px}.main-container .sab-conteiner .categories-container .categories .category-name{padding-left:3%;margin-bottom:5%}.main-container .sab-conteiner .categories-container .categories .category-wants{margin:2px;padding:1px 5px;background-color:#fff;border:1px solid #2de9ed}",""]),t.exports=n},485:function(t,n,e){"use strict";e.r(n);e(17),e(46),e(75),e(34),e(144),e(30),e(40);var r=e(5),o={components:{WantAdd:e(441).default},middleware:["before_auth"],data:function(){return{want:"",wants:[],modal:!1,categories:[{id:1,name:"やり遂げたい目標"},{id:2,name:"なんとなくの目標"}],form:{id:"",category_id:"",name:"",reachability:"",priority:"",user:""}}},created:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$store.dispatch("wants/getWants");case 2:t.setWants();case 3:case"end":return n.stop()}}),n)})))()},beforeUpdate:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.wantsUpdate(t.wants);case 2:case"end":return n.stop()}}),n)})))()},beforeDestroy:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.wantsUpdate();case 2:case"end":return n.stop()}}),n)})))()},computed:{stoWants:function(){return this.$store.state.wants.stoWants},stoGoal:function(){return this.$store.state.goal.stoGoal},displayCategories:function(){var t=[],n="",data=this.wants;return this.categories.map((function(e){n=data.filter((function(t){return t.category_id===e.id})),t.push({id:e.id,name:e.name,wants:n})})),t}},methods:{dragStart:function(t){this.want=t},dragOver:function(t){var n,e,r=this;t.id!==this.want.id&&(this.wants.map((function(t,e){t.id===r.want.id&&(n=e,t.priority=e)})),this.wants.map((function(n,r){n.id===t.id&&(e=r)})),this.wants.splice(n,1),this.want.category_id=t.category_id,this.wants.splice(e,0,this.want))},wantAdd:function(t,n){var e=0,r=[];this.wants.map((function(t){t.category_id===n&&r.push(t)})),0===r.length?e=0:(r.map((function(t){t.priority>=e&&(e=t.priority)})),e+=1),this.$store.dispatch("wants/wantCreate",{name:t,categoryId:n,priority:e}),location.reload()},wantUpdate:function(){var t=this,n=this.wants.find((function(n){return n.id===t.form.id}));n=Object.assign(n,this.form),this.modal=!1,this.$store.dispatch("wants/wantUpdate",n)},wantReUpdate:function(t){this.$store.dispatch("wants/wantUpdate",t),location.reload()},wantDelete:function(){var t=this,n=this.wants.find((function(n){return n.id===t.form.id}));this.$store.dispatch("wants/wantDelete",n.id),this.modal=!1,location.reload()},openModal:function(t,n){this.category=t,Object.assign(this.form,n),this.modal=!0},setWants:function(){var t=this.stoWants,n=[],e=[];t.map((function(t){1===t.category_id?n.push(t):e.push(t)})),n.map((function(t,n){t.priority=n})),e.map((function(t,n){t.priority=n})),t=n.concat(e),this.wants=t},wantsUpdate:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var e,r,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e=t.wants,r=[],o=[],e.map((function(t){1===t.category_id?r.push(t):o.push(t)})),r.map((function(t,n){t.priority=n})),o.map((function(t,n){t.priority=n})),e=r.concat(o),n.next=9,t.$store.dispatch("wants/wantsUpdate",e);case 9:case"end":return n.stop()}}),n)})))()}}},c=(e(467),e(74)),d=e(111),l=e.n(d),m=e(261),f=e(410),w=e(409),h=e(479),v=e(408),_=e(170),y=e(445),x=e(457),component=Object(c.a)(o,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("v-container",[e("v-card",{staticClass:"main-container"},[e("v-card-title",[t._v("私が達成したい目標は?")]),t._v(" "),e("v-card-subtitle",[t._v("達成したい目標を全て書き出してみましょう。新しく目標を追加するときは＋新規目標から追加してみてください。追加後はドラッグ・アンド・ドロップで移動できます")]),t._v(" "),e("div",{staticClass:"sab-conteiner"},[e("v-card-title",[t._v("目標設定ツール")]),t._v(" "),e("v-row",{staticClass:"categories-container",attrs:{justify:"center"}},t._l(t.displayCategories,(function(n,r){return e("v-col",{key:r,staticClass:"categories",on:{drop:function(n){return t.drop(t.event)}}},[e("div",{staticClass:"category-name"},[t._v(t._s(n.name))]),t._v(" "),t._l(n.wants,(function(r,o){return e("div",{key:o,staticClass:"category-wants",attrs:{id:"drop_field",draggable:"true"},on:{dragstart:function(n){return t.dragStart(r)},dragover:function(n){return t.dragOver(r)},click:function(e){return t.openModal(n,r)}}},[t._v("\n            "+t._s(r.name)+"\n          ")])})),t._v(" "),e("want-add",{attrs:{category_id:n.id},on:{wantAdded:t.wantAdd}}),t._v(" "),e("v-overlay",{directives:[{name:"show",rawName:"v-show",value:t.modal,expression:"modal"}]},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.modal,expression:"modal"}],staticClass:"modal_base"},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.modal,expression:"modal"}],staticClass:"modal_overlay",on:{click:function(n){t.modal=!1}}})]),t._v(" "),e("div",{staticClass:"modal_content"},[e("v-textarea",{attrs:{light:"",color:"primary","background-color":"white","auto-grow":"",outlined:"",rows:"1","row-height":"3"},model:{value:t.form.name,callback:function(n){t.$set(t.form,"name",n)},expression:"form.name"}},[e("p",[t._v(t._s(t.form.name))])]),t._v(" "),e("v-btn",{attrs:{color:"primary"},on:{click:t.wantUpdate}},[t._v("更新")]),t._v(" "),e("v-btn",{attrs:{color:"gray"},on:{click:t.wantDelete}},[t._v("削除")])],1)])],2)})),1),t._v(" "),e("nuxt-link",{attrs:{to:"/mypage"}},[e("v-btn",{staticClass:"done_btn",attrs:{width:"200px",bottom:"",color:"primary"}},[t._v("\n          保存\n        ")])],1)],1)],1)],1)}),[],!1,null,null,null);n.default=component.exports;l()(component,{WantAdd:e(441).default}),l()(component,{VBtn:m.a,VCard:f.a,VCardSubtitle:w.b,VCardTitle:w.d,VCol:h.a,VContainer:v.a,VOverlay:_.a,VRow:y.a,VTextarea:x.a})}}]);